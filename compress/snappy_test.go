package compress

import (
	"fmt"
	"github.com/golang/snappy"
	"testing"
)

const test = `[{"provinceName":"北京市","provinceCode":"11","cityGroupList":[{"cityName":"北京市","cityCode":"110000","districtGroupList":[{"districtName":"朝阳区","districtCode":"110105","townGroupList":[{"townName":"朝阳区","townCode":"110105"},{"townName":"海淀区","townCode":"110108"},{"townName":"昌平区","townCode":"110114"},{"townName":"怀柔区","townCode":"110116"}]},{"districtName":"海淀区","districtCode":"110108","townGroupList":[{"townName":"朝阳区","townCode":"110105"},{"townName":"海淀区","townCode":"110108"},{"townName":"昌平区","townCode":"110114"},{"townName":"怀柔区","townCode":"110116"}]},{"districtName":"昌平区","districtCode":"110114","townGroupList":[{"townName":"朝阳区","townCode":"110105"},{"townName":"海淀区","townCode":"110108"},{"townName":"昌平区","townCode":"110114"},{"townName":"怀柔区","townCode":"110116"}]},{"districtName":"怀柔区","districtCode":"110116","townGroupList":[{"townName":"朝阳区","townCode":"110105"},{"townName":"海淀区","townCode":"110108"},{"townName":"昌平区","townCode":"110114"},{"townName":"怀柔区","townCode":"110116"}]}]}]},{"provinceName":"天津市","provinceCode":"12","cityGroupList":[{"cityName":"天津市","cityCode":"120000","districtGroupList":[{"districtName":"西青区","districtCode":"120111","townGroupList":[{"townName":"西青区","townCode":"120111"}]}]}]},{"provinceName":"河北省","provinceCode":"13","cityGroupList":[{"cityName":"唐山市","cityCode":"130200","districtGroupList":[{"districtName":"乐亭县","districtCode":"130225","townGroupList":[{"townName":"乐亭县","townCode":"130225"}]}]}]},{"provinceName":"山西省","provinceCode":"14","cityGroupList":[{"cityName":"太原市","cityCode":"140100","districtGroupList":[{"districtName":"迎泽区","districtCode":"140106","townGroupList":[{"townName":"迎泽区","townCode":"140106"}]}]}]},{"provinceName":"浙江省","provinceCode":"1784764","cityGroupList":[{"cityName":"嘉兴市","cityCode":"1805953","districtGroupList":[{"districtName":"秀洲区","districtCode":"6607477","townGroupList":[{"townName":"秀洲区","townCode":"6607477"}]}]}]},{"provinceName":"上海市","provinceCode":"1796231","cityGroupList":[{"cityName":"上海市","cityCode":"1796236","districtGroupList":[{"districtName":"松江区","districtCode":"1794034","townGroupList":[{"townName":"松江区","townCode":"1794034"}]}]}]},{"provinceName":"山东省","provinceCode":"1796328","cityGroupList":[{"cityName":"烟台市","cityCode":"1787093","districtGroupList":[{"districtName":"福山区","districtCode":"1810920","townGroupList":[{"townName":"福山区","townCode":"1810920"}]}]},{"cityName":"济南市","cityCode":"1805753","districtGroupList":[{"districtName":"历下区","districtCode":"6573950","townGroupList":[{"townName":"历下区","townCode":"6573950"}]}]}]},{"provinceName":"江西省","provinceCode":"1806222","cityGroupList":[{"cityName":"抚州市","cityCode":"7739108","districtGroupList":[{"districtName":"广昌县","districtCode":"1809943","townGroupList":[{"townName":"广昌县","townCode":"1809943"}]}]}]},{"provinceName":"广东省","provinceCode":"1809935","cityGroupList":[{"cityName":"梅州市","cityCode":"1800794","districtGroupList":[{"districtName":"大埔县","districtCode":"1814563","townGroupList":[{"townName":"大埔县","townCode":"1814563"}]}]}]},{"provinceName":"甘肃省","provinceCode":"1810676","cityGroupList":[{"cityName":"天水市","cityCode":"1792891","districtGroupList":[{"districtName":"武山县","districtCode":"1791003","townGroupList":[{"townName":"武山县","townCode":"1791003"}]}]}]},{"provinceName":"福建省","provinceCode":"1811017","cityGroupList":[{"cityName":"泉州市","cityCode":"1797353","districtGroupList":[{"districtName":"晋江市","districtCode":"1797658","townGroupList":[{"townName":"晋江市","townCode":"1797658"},{"townName":"惠安县","townCode":"1806894"}]},{"districtName":"惠安县","districtCode":"1806894","townGroupList":[{"townName":"晋江市","townCode":"1797658"},{"townName":"惠安县","townCode":"1806894"}]}]},{"cityName":"泉州市","cityCode":"1810821","districtGroupList":[{"districtName":"惠安县","districtCode":"6607645","townGroupList":[{"townName":"惠安县","townCode":"6607645"}]}]}]},{"provinceName":"安徽省","provinceCode":"1818058","cityGroupList":[{"cityName":"安庆市","cityCode":"1817993","districtGroupList":[{"districtName":"怀宁县","districtCode":"1807676","townGroupList":[{"townName":"怀宁县","townCode":"1807676"}]}]}]},{"provinceName":"辽宁省","provinceCode":"2036115","cityGroupList":[{"cityName":"丹东市","cityCode":"2037886","districtGroupList":[{"districtName":"振安区","districtCode":"6599885","townGroupList":[{"townName":"振安区","townCode":"6599885"}]}]}]},{"provinceName":"北京市","provinceCode":"2038349","cityGroupList":[{"cityName":"北京市","cityCode":"1816670","districtGroupList":[{"districtName":"朝阳区","districtCode":"1815402","townGroupList":[{"townName":"朝阳区","townCode":"1815402"}]}]}]},{"provinceName":"上海市","provinceCode":"31","cityGroupList":[{"cityName":"上海市","cityCode":"310000","districtGroupList":[{"districtName":"普陀区","districtCode":"310107","townGroupList":[{"townName":"普陀区","townCode":"310107"}]}]}]},{"provinceName":"浙江省","provinceCode":"33","cityGroupList":[{"cityName":"杭州市","cityCode":"330100","districtGroupList":[{"districtName":"余杭区","districtCode":"330110","townGroupList":[{"townName":"余杭区","townCode":"330110"},{"townName":"余杭区","townCode":"3301100000000"}]},{"districtName":"余杭区","districtCode":"3301100000000","townGroupList":[{"townName":"余杭区","townCode":"330110"},{"townName":"余杭区","townCode":"3301100000000"}]}]}]},{"provinceName":"安徽省","provinceCode":"34","cityGroupList":[{"cityName":"蚌埠市","cityCode":"340300","districtGroupList":[{"districtName":"淮上区","districtCode":"340311","townGroupList":[{"townName":"淮上区","townCode":"340311"}]}]},{"cityName":"安庆市","cityCode":"340800","districtGroupList":[{"districtName":"大观区","districtCode":"340803","townGroupList":[{"townName":"大观区","townCode":"340803"}]}]}]},{"provinceName":"福建省","provinceCode":"35","cityGroupList":[{"cityName":"福州市","cityCode":"350100","districtGroupList":[{"districtName":"长乐区","districtCode":"350182","townGroupList":[{"townName":"长乐区","townCode":"350182"}]}]},{"cityName":"厦门市","cityCode":"350200","districtGroupList":[{"districtName":"湖里区","districtCode":"350206","townGroupList":[{"townName":"湖里区","townCode":"350206"}]}]},{"cityName":"泉州市","cityCode":"350500","districtGroupList":[{"districtName":"惠安县","districtCode":"350521","townGroupList":[{"townName":"惠安县","townCode":"350521"}]}]}]},{"provinceName":"江西省","provinceCode":"36","cityGroupList":[{"cityName":"抚州市","cityCode":"361000","districtGroupList":[{"districtName":"黎川县","districtCode":"361022","townGroupList":[{"townName":"黎川县","townCode":"361022"},{"townName":"广昌县","townCode":"361030"}]},{"districtName":"广昌县","districtCode":"361030","townGroupList":[{"townName":"黎川县","townCode":"361022"},{"townName":"广昌县","townCode":"361030"}]}]}]},{"provinceName":"山东省","provinceCode":"37","cityGroupList":[{"cityName":"青岛市","cityCode":"370200","districtGroupList":[{"districtName":"崂山区","districtCode":"370212","townGroupList":[{"townName":"崂山区","townCode":"370212"}]}]}]},{"provinceName":"湖北省","provinceCode":"42","cityGroupList":[{"cityName":"武汉市","cityCode":"420100","districtGroupList":[{"districtName":"江汉区","districtCode":"420103","townGroupList":[{"townName":"江汉区","townCode":"420103"}]}]}]},{"provinceName":"广东省","provinceCode":"44","cityGroupList":[{"cityName":"深圳市","cityCode":"440300","districtGroupList":[{"districtName":"龙岗区","districtCode":"440307","townGroupList":[{"townName":"龙岗区","townCode":"440307"}]}]}]},{"provinceName":"海南省","provinceCode":"46","cityGroupList":[{"cityName":"海口市","cityCode":"460100","districtGroupList":[{"districtName":"美兰区","districtCode":"460108","townGroupList":[{"townName":"美兰区","townCode":"460108"}]}]}]},{"provinceName":"重庆市","provinceCode":"50","cityGroupList":[{"cityName":"重庆市","cityCode":"500000","districtGroupList":[{"districtName":"江北区","districtCode":"500105","townGroupList":[{"townName":"江北区","townCode":"500105"},{"townName":"南岸区","townCode":"500108"}]},{"districtName":"南岸区","districtCode":"500108","townGroupList":[{"townName":"江北区","townCode":"500105"},{"townName":"南岸区","townCode":"500108"}]}]}]},{"provinceName":"新疆维吾尔自治区","provinceCode":"65","cityGroupList":[{"cityName":"克拉玛依市","cityCode":"650200","districtGroupList":[{"districtName":"克拉玛依区","districtCode":"6502030000000","townGroupList":[{"townName":"克拉玛依区","townCode":"6502030000000"}]}]}]},{"provinceName":"台湾省","provinceCode":"7280291","cityGroupList":[{"cityName":"云林县","cityCode":"1665194","districtGroupList":[{"districtName":"东势乡","districtCode":"1666457","townGroupList":[{"townName":"东势乡","townCode":"1666457"}]}]}]}]`

func TestSnappy(t *testing.T) {
	fmt.Println("source len:", len(test))

	got := snappy.Encode(nil, []byte(test))
	fmt.Println("compressed len:", len(got))

	a, _ := snappy.Decode(nil, got)
	fmt.Println("uncompressed len:", len(a))
}
